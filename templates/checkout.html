<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Checkout</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    /* Base styling */
    * {
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: linear-gradient(135deg, #ecfdf5 0%, #f0fdfa 50%, #f0f9ff 100%);
      min-height: 100vh;
      margin: 0;
      padding: 20px;
      position: relative;
      overflow-x: hidden;
    }

    /* Animated background */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        radial-gradient(circle at 20% 80%, rgba(16, 185, 129, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(20, 184, 166, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 40% 40%, rgba(6, 182, 212, 0.05) 0%, transparent 50%);
      z-index: -1;
      animation: backgroundShift 20s ease-in-out infinite;
    }

    @keyframes backgroundShift {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }

    /* Container */
    .checkout-container { 
      max-width: 900px; 
      margin: auto;
      animation: fadeInUp 0.8s ease forwards;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Header */
    .checkout-container h2 {
      text-align: center;
      font-size: 2.5rem;
      font-weight: 700;
      background: linear-gradient(135deg, #059669, #0d9488, #0891b2);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 2rem;
      position: relative;
      font-variant: small-caps;
    }

    .checkout-container h2::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 50%;
      transform: translateX(-50%);
      width: 60px;
      height: 4px;
      background: linear-gradient(90deg, #10b981, #14b8a6);
      border-radius: 2px;
    }

    /* Cart Preview */
    .cart-preview { 
      display: flex; 
      flex-wrap: wrap; 
      gap: 20px; 
      margin-bottom: 40px;
      animation: slideUp 0.8s ease forwards;
      animation-delay: 0.2s;
      opacity: 0;
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(40px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .preview-card {
      flex: 1 1 200px;
      min-width: 200px;
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.5);
      border-radius: 20px;
      padding: 20px;
      text-align: center;
      box-shadow: 
        0 8px 32px rgba(0, 0, 0, 0.1),
        0 2px 8px rgba(0, 0, 0, 0.05);
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      position: relative;
      overflow: hidden;
    }

    .preview-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(16, 185, 129, 0.1), transparent);
      transition: left 0.6s;
    }

    .preview-card:hover::before {
      left: 100%;
    }

    .preview-card:hover { 
      transform: translateY(-8px) scale(1.02);
      box-shadow: 
        0 20px 60px rgba(0, 0, 0, 0.15),
        0 8px 20px rgba(16, 185, 129, 0.2);
      border-color: rgba(16, 185, 129, 0.3);
    }

    .preview-card img { 
      width: 120px; 
      height: 120px; 
      object-fit: contain;
      border-radius: 12px;
      margin-bottom: 15px;
      transition: transform 0.3s ease;
    }

    .preview-card:hover img {
      transform: scale(1.1);
    }

    .preview-card h4 {
      font-size: 1.1rem;
      font-weight: 600;
      color: #1f2937;
      margin: 10px 0;
      transition: color 0.3s ease;
    }

    .preview-card:hover h4 {
      color: #059669;
    }

    .preview-card p {
      margin: 8px 0;
      color: #6b7280;
      font-weight: 500;
    }

    .preview-card p:last-child {
      font-size: 1.2rem;
      font-weight: 700;
      color: #059669;
    }

    /* Checkout Form */
    .checkout-form { 
      background: rgba(255, 255, 255, 0.85);
      backdrop-filter: blur(15px);
      padding: 40px;
      border-radius: 24px;
      border: 1px solid rgba(255, 255, 255, 0.5);
      box-shadow: 
        0 20px 60px rgba(0, 0, 0, 0.1),
        0 8px 20px rgba(0, 0, 0, 0.05);
      animation: slideUp 0.8s ease forwards;
      animation-delay: 0.4s;
      opacity: 0;
      position: relative;
    }

    .checkout-form::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #10b981, #14b8a6, #0891b2);
      border-radius: 24px 24px 0 0;
    }

    .checkout-form label { 
      font-weight: 600; 
      display: flex;
      align-items: center;
      margin: 20px 0 8px;
      color: #374151;
      font-size: 0.95rem;
      position: relative;
      font-variant: small-caps;
    }

    .checkout-form label::before {
      content: '';
      position: absolute;
      left: -15px;
      width: 4px;
      height: 20px;
      background: linear-gradient(135deg, #10b981, #14b8a6);
      border-radius: 2px;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .checkout-form label:hover::before {
      opacity: 1;
    }

    .checkout-form input, .checkout-form select, .checkout-form textarea {
      width: 100%; 
      padding: 16px 20px; 
      border-radius: 16px; 
      border: 2px solid #e5e7eb;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(5px);
      font-size: 1rem;
      font-family: inherit;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      margin-bottom: 10px;
    }

    .checkout-form input:focus, .checkout-form select:focus, .checkout-form textarea:focus {
      outline: none;
      border-color: #10b981;
      box-shadow: 
        0 0 0 4px rgba(16, 185, 129, 0.1),
        0 8px 20px rgba(16, 185, 129, 0.15);
      transform: translateY(-2px);
      background: rgba(255, 255, 255, 1);
    }

    .checkout-form textarea {
      resize: vertical;
      min-height: 100px;
      font-family: inherit;
    }

    .checkout-form select {
      cursor: pointer;
      appearance: none;
      background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
      background-position: right 12px center;
      background-repeat: no-repeat;
      background-size: 16px;
      padding-right: 50px;
    }

    .checkout-form button {
      margin-top: 30px; 
      padding: 18px; 
      width: 100%;
      background: linear-gradient(135deg, #10b981, #14b8a6);
      border: none; 
      color: white;
      font-size: 1.1rem; 
      font-weight: 700; 
      border-radius: 16px;
      cursor: pointer; 
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      position: relative;
      overflow: hidden;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      box-shadow: 
        0 8px 25px rgba(16, 185, 129, 0.3),
        0 4px 10px rgba(0, 0, 0, 0.1);
    }

    .checkout-form button::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.6s;
    }

    .checkout-form button:hover::before {
      left: 100%;
    }

    .checkout-form button:hover { 
      background: linear-gradient(135deg, #059669, #0d9488);
      transform: translateY(-3px);
      box-shadow: 
        0 15px 40px rgba(16, 185, 129, 0.4),
        0 8px 20px rgba(0, 0, 0, 0.15);
    }

    .checkout-form button:active {
      transform: translateY(-1px);
    }

    /* Responsive Design */
    @media (max-width: 1024px) {
      .checkout-layout {
        grid-template-columns: 1fr;
        gap: 30px;
      }

      .form-section {
        position: static;
      }
    }

    @media (max-width: 768px) {
      body {
        padding: 10px;
      }

      .checkout-container {
        max-width: 100%;
      }

      .checkout-container h2 {
        font-size: 2rem;
      }

      .checkout-layout {
        gap: 25px;
      }

      .cart-preview {
        grid-template-columns: 1fr;
        gap: 15px;
      }

      .checkout-form {
        padding: 25px;
        margin: 0 5px;
      }
    }

    @media (max-width: 480px) {
      .checkout-form {
        padding: 20px;
      }
    }

    /* Loading state for button */
    .checkout-form button.loading {
      pointer-events: none;
      opacity: 0.8;
    }

    .checkout-form button.loading::after {
      content: '';
      position: absolute;
      width: 20px;
      height: 20px;
      margin: auto;
      border: 2px solid transparent;
      border-top-color: #ffffff;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      right: 20px;
      top: 50%;
      transform: translateY(-50%);
    }

    .total-price-card {
        max-width: 300px;
        margin: 0 auto 40px auto;
        padding: 20px;
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.6);
        border-radius: 20px;
        text-align: center;
        box-shadow: 
            0 10px 25px rgba(0, 0, 0, 0.08),
            0 4px 10px rgba(16, 185, 129, 0.15);
        animation: fadeInUp 0.8s ease forwards;
        animation-delay: 0.3s;
        opacity: 0;
    }

    .total-price-card h3 {
        margin: 0 0 10px 0;
        font-size: 1.3rem;
        font-weight: 600;
        color: #374151;
    }

    .total-price-card p {
        font-size: 1.5rem;
        font-weight: 700;
        color: #059669;
        margin: 0;
    }


    @keyframes spin {
      0% { transform: translateY(-50%) rotate(0deg); }
      100% { transform: translateY(-50%) rotate(360deg); }
    }

    /* Enhanced focus styles for accessibility */
    input:focus, select:focus, textarea:focus, button:focus {
      outline: 2px solid #10b981;
      outline-offset: 2px;
    }
  </style>
</head>
<body>
    <div class="text-center mb-16 animate-fadeInUp">
      <h1 class="text-6xl md:text-7xl font-bold bg-gradient-to-r from-emerald-600 via-teal-700 to-cyan-800 bg-clip-text text-transparent mb-4 tracking-tight">
        SmartBasket
      </h1>
      <p class="text-xl md:text-2xl text-gray-600 font-light mb-2">Where recipes become groceries</p>
      <div class="w-24 h-1 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-full mx-auto animate-pulse"></div>
    </div>

  <div class="checkout-container">
    <h2>🧾 Checkout</h2><br><br>

    <!-- Cart Preview -->
    <div class="cart-preview">
      {% for item in cart if item.QuantitySelected > 0 %}
      <div class="preview-card">
        <img src="{{ item['Image_Url'] }}" alt="{{ item['ProductName'] }}">
        <h4>{{ item['ProductName'] }}</h4>
        <p>Qty: {{ item['QuantitySelected'] }}</p>
        <p>₹{{ (item['QuantitySelected'] * item['Price'])|round(2) }}</p>
      </div>
      {% endfor %}
    </div>

    <br><br>
    <!-- 🛒 Total Cart Price -->
    <div class="total-price-card">
        <h3>Total Price</h3>
        <p>₹{{ total|round(2) }}</p>
    </div>



    <!-- Checkout Form -->
    <form class="checkout-form" method="post" action="{{ url_for('checkout') }}">
      <label for="name">Full Name</label>
      <input type="text" id="name" name="name" required>

      <label for="address">Address</label>
      <textarea id="address" name="address" required></textarea>

      <label for="phone">Phone Number</label>
      <input type="text" id="phone" name="phone" required>

      <label for="email">Email:</label>
      <input type="email" id="email" name="email" required>

      <label for="info">Additional Info (Optional)</label>
      <textarea id="info" name="info"></textarea>

      <label for="payment">Payment Mode</label>
      <select id="payment" name="payment" required>
        <option value="Cash">Cash</option>
        <option value="Card">Card</option>
        <option value="UPI">UPI</option>
      </select>

      <button type="submit">Place Order</button>
    </form>
  </div>

  <footer class="mt-12 text-center text-gray-600 text-sm">
      <hr class="my-4 border-t border-gray-300">
      <p>© 2025 SmartBasket. All Rights Reserved.</p>
      <a href="mailto:support@smartbasket.com" style="color:#2e7d32; text-decoration:none;">algorhythm.noreply@gmail.com</a> 
    </footer>

  <script>
    // Enhanced form interactions
    document.addEventListener('DOMContentLoaded', function() {
      const form = document.querySelector('.checkout-form');
      const submitBtn = form.querySelector('button[type="submit"]');
      const inputs = form.querySelectorAll('input, textarea, select');

      // Add loading state to submit button
      form.addEventListener('submit', function() {
        submitBtn.classList.add('loading');
        submitBtn.textContent = 'Processing...';
      });

      // Enhanced focus effects
      inputs.forEach(input => {
        input.addEventListener('focus', function() {
          this.parentElement.style.transform = 'translateX(5px)';
        });

        input.addEventListener('blur', function() {
          this.parentElement.style.transform = 'translateX(0)';
        });
      });

      // Smooth scroll to form if validation fails
      inputs.forEach(input => {
        input.addEventListener('invalid', function() {
          setTimeout(() => {
            this.scrollIntoView({ behavior: 'smooth', block: 'center' });
          }, 100);
        });
      });
    });

    // Add subtle floating animation to preview cards
    document.querySelectorAll('.preview-card').forEach((card, index) => {
      card.style.animationDelay = `${0.1 * index}s`;
      
      // Subtle floating effect
      setInterval(() => {
        if (!card.matches(':hover')) {
          card.style.transform += ` translateY(${Math.sin(Date.now() * 0.001 + index) * 2}px)`;
        }
      }, 50);
    });
  </script>
</body>
</html>